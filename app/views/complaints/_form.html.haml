= simple_form_for(@complaint, html: {class: 'form-horizontal', id: 'complaint_form', role: 'form' }) do |f|
  .row
    %hr
    .col-xs-3
      = f.input :received_date, as: :string, input_html: { class: "date-picker col-xs-8",
                                                           value: default_received_date }
    .col-xs-3
      = f.association :user, as: :select, include_blank: false, label: "Agent", collection: User.all, input_html: { class: "col-xs-8" }
    .col-xs-3
      = f.input :status, collection: Complaint::STATUSES, include_blank: false, input_html: { class: "col-xs-8" }
    .col-xs-3
      = f.input :adverse_reaction, inline_label: "Yes", label: "Adverse Reaction?"
      %a{"data-toggle" => "modal", "data-target" => "#adverse-event-modal"} Adverse Event Report

  .row
    %hr
    .col-xs-12
      %h2 Customer Information
      = f.simple_fields_for :customer do |customer_form|
        .col-xs-6
          = customer_form.input :name, input_html: { class: "col-xs-8" }
          = customer_form.input :email, input_html: { class: "col-xs-8" }
          = customer_form.input :phone, input_html: { class: "col-xs-8" }
        .col-xs-6
          = customer_form.input :address, input_html: { class: "col-xs-8" }
          = customer_form.input :city, input_html: { class: "col-xs-8" }
          = customer_form.input :state, input_html: { class: "col-xs-4" }
          = customer_form.input :zip, input_html: { class: "col-xs-4" }

  .row#product-details
    .col-xs-12
      %h2 Product Details
      %table.table
        %tr
          %th Product
          %th Quantity
          %th Size Count
          %th Lot
          %th Expiration
          %th Actions
        = f.simple_fields_for :faulty_products do |product_form|
          = render 'faulty_product_fields', product_form: product_form
      = link_to_add_fields "Add Another Faulty Product", f, :faulty_products

  .row
    %hr
    .col-xs-12
      %h2 Complaint Details
      = f.input :order_number
      = f.input :immediate_response, input_html: { class: "col-xs-10", :rows => 5 }
      = f.input :summary, label: "Complaint Summary (short)", input_html: { class: "col-xs-10" }
      = f.input :correspondence_history, input_html: { class: "col-xs-10", :rows => 15 }
      .form-actions
        = f.submit class: "btn btn-primary"


= render partial: 'adverse_events/modal'
